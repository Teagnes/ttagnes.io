# 大数据总结



## 

## hive踩坑

### 新增字段不生效

在低版本的hive中，修改了表结构并新增字段后，只有在新增的分区中识别到，在历史的分区中查询时会抛错没有改字段，而在spark中则无此问题

### 删除分区不释放空间

在使用`alter table tablename drop if exists partition(date<=20190909)` 命令删除分区时，只会删除分区元信息，但是数据不会被删除，导致空间没有被释放，这里不要使用 `<=` 来删除多个分区，而是一个个删除分区则没有改问题


## kerbores
### 域认证集成
使用kerbores作为集群认证时，推荐在使用使用独立的账号来进行交互，方便用户的资源隔离和权限控制，但是在使用自带的认证时，提交任务时会提示在服务器上没有对应的账户,通常抛出以下错误
```
User xxx not fund
```
- 统一认证
一般大公司都有统一的域认证集成，建议在kerbores中使用统一的域认证集成，即可避免该问题。
- 在服务器上新建账户
如果没有统一的域认证，也可以在集群所有的服务器上新建对应的账户，也可以解决该问题，不过这种方式需要在所有的集群节点上操作，并不优雅。




